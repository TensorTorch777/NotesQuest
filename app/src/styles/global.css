/* Global utilities and theme helpers for pages */

@keyframes subtle-noise {
  0% { filter: contrast(100%) brightness(100%); }
  100% { filter: contrast(100%) brightness(100%); }
}

.noise-texture {
  position: relative;
}
.noise-texture::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.03"/></svg>');
  background-size: cover;
  animation: subtle-noise 2s steps(2) infinite;
}

/* Decorative path background container used by pages */
.path-bg {
  position: fixed;
  inset: 0;
  opacity: 0.25;
  pointer-events: none;
}

/* Smooth scroll for anchor links used in headers */
html {
  scroll-behavior: smooth;
}

/* Soft diagonal grid background used on upload page */
.bg-grid-pink {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none"><path d="M0 20 L20 0 M-10 30 L30 -10 M10 40 L40 10 M20 50 L50 20" stroke="%23f5c2d6" stroke-width="2" stroke-opacity="0.6"/></svg>');
  background-size: 80px 80px;
}

/* Landing testimonials speech bubble */
.speech-bubble {
  position: relative;
  background: #ffffff;
  border-radius: 1.5rem;
  padding: 1.5rem;
}
.speech-bubble:after {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border: 20px solid transparent;
  border-top-color: #ffffff;
  border-bottom: 0;
  margin-left: -20px;
  margin-bottom: -1px;
}
.speech-bubble.left:after { left: 20%; transform: translateX(0); }
.speech-bubble.right:after { right: 20%; left: auto; transform: translateX(0); }
.speech-bubble.center:after { left: 50%; transform: translateX(-50%); }

.dark .speech-bubble { background: #330033; }
.dark .speech-bubble:after { border-top-color: #330033; }

/* Login page radial background */
.path-bg-radial {
  background-image:
    radial-gradient(circle at 10% 90%, rgba(238, 43, 140, 0.10) 0%, transparent 30%),
    radial-gradient(circle at 90% 10%, rgba(238, 43, 140, 0.10) 0%, transparent 30%);
}

/* Stitched dashed input borders for login */
.stitched-border {
  border: 2px dashed color-mix(in oklab, var(--color-primary) 25%, transparent);
}

/* Upload page moving line background */
.background-lines { position: absolute; inset: 0; width: 100%; height: 100%; overflow: hidden; z-index: -1; }
.line-pattern {
  --line-width: 200px;
  --line-height: 200px;
  position: absolute;
  width: calc(100% + var(--line-width));
  height: calc(100% + var(--line-height));
  background-image:
    radial-gradient(circle at 100% 100%, transparent 0, transparent 4px, rgba(236,72,153,0.05) 4px, rgba(236,72,153,0.05) 5px, transparent 5px, transparent 100%),
    radial-gradient(circle at 0% 100%, transparent 0, transparent 4px, rgba(236,72,153,0.05) 4px, rgba(236,72,153,0.05) 5px, transparent 5px, transparent 100%),
    radial-gradient(circle at 100% 0%, transparent 0, transparent 4px, rgba(236,72,153,0.05) 4px, rgba(236,72,153,0.05) 5px, transparent 5px, transparent 100%),
    radial-gradient(circle at 0% 0%, transparent 0, transparent 4px, rgba(236,72,153,0.05) 4px, rgba(236,72,153,0.05) 5px, transparent 5px, transparent 100%),
    linear-gradient(135deg, transparent 0%, transparent 45%, rgba(236,72,153,0.05) 45%, rgba(236,72,153,0.05) 55%, transparent 55%, transparent 100%),
    linear-gradient(45deg, transparent 0%, transparent 45%, rgba(236,72,153,0.05) 45%, rgba(236,72,153,0.05) 55%, transparent 55%, transparent 100%);
  background-size: var(--line-width) var(--line-height);
  animation: flow-lines 40s linear infinite;
}
@keyframes flow-lines { 0% { transform: translate(0,0); } 100% { transform: translate(calc(-1 * var(--line-width)), calc(-1 * var(--line-height))); } }

/* Ensure quiz path background stays behind content */
.path-bg { position: absolute; inset: 0; pointer-events: none; }

/* History page: keep decorative paths behind and reduce opacity for readability */
.path-bg svg { opacity: 0.08; }

/* Score page animated background paths */
.background-paths {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 0;
}
.background-paths svg {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  animation: move-paths 60s linear infinite;
}
@keyframes move-paths {
  0% { transform: translate(0, 0); }
  50% { transform: translate(-25%, -25%); }
  100% { transform: translate(0, 0); }
}


